> **重要声明**
>
> 本插件基于 [shskjw](https://github.com/shskjw) 大佬的开源项目 [astrbot_plugin_shoubanhua](https://github.com/shskjw/astrbot_plugin_shoubanhua) 进行了深度的二次开发和功能扩展。
>
> ---
# Nano Banana 生图插件 (astrbot_plugin_nano_banana)

**作者:** 沐沐沐倾
**版本:** 1.0.3
**仓库:** [Github](https://github.com/mangen-wx/astrbot_plugin_nano_banana)

一款功能强大的AI生图插件，基于柏拉图API，集成了多种预设风格、智能统一指令、及后台管理功能。

## ✨ 核心功能

- **智能统一指令**: 使用 `/生图` 或 `/draw` 指令，插件会自动检测你是否发送了图片，智能切换【文生图】和【图生图】模式，极大简化操作。
- **丰富的预设指令**: 内置十几种图生图指令，如 `/手办化`, `/Q版化`, `/cos化` 等，一键生成特定风格。
- **灵活的输入方式**: 预设指令支持直接发送图片、回复图片、或`@用户`来使用其头像进行制作。
- **强大的管理功能**: 管理员可以通过指令轻松管理API Key、增减用户和群组的使用次数。
- **灵活的次数控制**: 支持分别或同时开启个人和群组的使用次数限制。
- **多API Key轮换与重试**: 可配置多个API Key，插件会在请求失败时自动切换，提高可用性。
- **自动清理**: 卸载插件时，会自动删除所有相关的缓存和数据文件，保持系统清洁。

## ⚙️ 安装与配置

### 安装

1.  下载本插件，将 `astrbot_plugin_nano_banana` 整个文件夹放入您的AstrBot插件目录 (`/plugins`) 中。
2.  重启 AstrBot。

### 配置

在 AstrBot 管理面板的 `插件管理` -> `Nano Banana 生图` 中进行配置。核心配置项包括API地址、密钥、代理设置和次数限制等。

---

## 📖 命令列表

### 1. 智能生图 (⭐ 推荐)

| 命令 | 功能说明 |
| :--- | :--- |
| `/生图 <提示词> [图片]` | **智能指令**。不带图即为**文生图**，带图即为**图生图**。 |
| `/draw <提示词> [图片]` | 同上，是 `/生图` 的英文别名。 |

### 2. 预设风格 (部分)

| 命令 | 功能说明 |
| :--- | :--- |
| `/手办化 [图片]` | 生成标准手办化图片 |
| `/Q版化 [图片]` | 生成Q版手办化图片 |
| `/痛屋化 [图片]` | 生成痛屋场景图片 |
| `/痛车化 [图片]` | 生成痛车场景图片 |
| `/cos化 [图片]` | 生成cosplay照片 |
| ... | 更多指令请使用 `/生图帮助` 查看 |

### 3. 查询与管理

| 命令 | 功能说明 |
| :--- | :--- |
| `/生图查询次数` | 查询自己的剩余次数 |
| `/生图帮助` | 显示帮助信息 |
| `/生图添加key <key>` | **(仅主人)** 添加API密钥 |
| `/生图增加用户次数 <QQ> <数量>` | **(仅主人)** 为用户增加次数 |
| ... | 更多管理指令请查看帮助 |
