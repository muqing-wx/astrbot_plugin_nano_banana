> **重要声明**
>
> 本插件基于 [shskjw](https://github.com/shskjw) 大佬的开源项目 [astrbot_plugin_shoubanhua](https://github.com/shskjw/astrbot_plugin_shoubanhua) 进行了深度的二次开发和功能扩展。
>
> ---
# Nano Banana 生图插件 (astrbot_plugin_nano_banana)

一款功能强大的AI生图插件，基于柏拉图API，集成了多种预设风格、智能统一指令、及后台管理功能。

## ✨ 核心功能

- **智能统一指令**: 使用 `/生图` 或 `/draw` 指令，插件会自动检测你是否发送了图片，智能切换【文生图】和【图生图】模式。
- **专业帮助图片**: `/生图帮助` 命令会生成一张排版精美、清晰易读的图片，并附带可点击的推广链接。
- **丰富的预设指令**: 内置二十多种图生图指令，如 `/手办化`, `/Q版化`, `/cos化` 等，一键生成特定风格。
- **灵活的输入方式**: 预设指令支持直接发送图片、回复图片、或`@用户`来使用其头像进行制作。
- **强大的管理功能**: 管理员可以通过指令轻松管理API Key、增减用户和群组的使用次数。
- **灵活的次数控制**: 支持分别或同时开启个人和群组的使用次数限制。
- **多API Key轮换与重试**: 可配置多个API Key，插件会在请求失败时自动切换，提高可用性。
- **自动清理**: 卸载插件时，会自动删除所有相关的缓存和数据文件，保持系统清洁。

## ⚙️ 安装与配置

### 安装

1.  下载本插件，将 `astrbot_plugin_nano_banana` 整个文件夹放入您的AstrBot插件目录 (`/plugins`) 中。
2.  **(重要)** 在 `astrbot_plugin_nano_banana` 文件夹内，**新建一个 `resources` 文件夹**。
3.  **下载一个支持中文的字体文件** ( `.ttf` 格式，如思源黑体)，放入 `resources` 文件夹，并**重命名为 `font.ttf`**。
4.  重启 AstrBot。

### 配置

在 AstrBot 管理面板的 `插件管理` -> `Nano Banana 生图` 中进行配置。核心配置项包括API地址、密钥、代理设置和次数限制等。

---

## 📖 命令列表

`/生图帮助` 命令会以图片形式展示以下所有指令：

### ⭐ 智能指令 (推荐)

| 命令 (别名) | 功能说明 |
| :--- | :--- |
| `/生图`, `/draw`, `/画画` | `<提示词> [图片]` - 自动判断文生图/图生图模式。 |

### ✨ 预设风格指令 (图生图)

-   **手办化**: `/手办化`, `/手办化2` ... `/手办化6`
-   **角色扮演**: `/cos化`, `/cos自拍`
-   **Q版可爱**: `/Q版化`, `/fumo化`
-   **场景变换**: `/痛屋化`, `/痛屋化2`, `/痛车化`
-   **艺术风格**: `/贴纸化`, `/孤独的我`, `/鬼图`
-   **视角变换**: `/第一视角`, `/第三视角`
-   **特殊癖好**: `/玉足`

### 🔧 通用指令

| 命令 | 功能说明 |
| :--- | :--- |
| `/生图帮助` | 显示此帮助图 |
| `/生图查询次数` | 查询个人和所在群的剩余次数 |

### 🔑 管理指令 (仅主人)

| 命令 | 功能说明 |
| :--- | :--- |
| `/生图添加key` | `<key1> ...` - 批量添加API密钥 |
| `/生图key列表` | 查看所有密钥 |
| `/生图删除key` | `<序号\|all>` - 删除指定或全部密钥 |
| `/生图增加用户次数` | `<QQ号> <数量>` - 增加用户次数 |
| `/生图增加群组次数` | `<群号> <数量>` - 增加群聊次数 |
